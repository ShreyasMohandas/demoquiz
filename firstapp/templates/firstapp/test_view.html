{% extends "firstapp/base.html" %}
{% load firstapp_extras %}
{% block body_block %}


<div class="test-details">
<div class="table-responsive">
    <h1>Test Details</h1>
    <div class="info-card">
        <h2>Title : {{ test.display_name }}</h2>
        <p><strong>Command:</strong> {{ test.test_name }}</p>
        <p><strong>Start Time:</strong> {{ test.start_time }}</p>
        <p><strong>End Time:</strong> {{ test.end_time }}</p>
        <p><strong>Test Marks:</strong> {{ test.test_total_marks }}</p>
        <p><strong>Class Average:</strong> {{ average }}</p>
    </div>
    <table class="bordered-table" >
        <thead>
            <tr>
                <th>Students</th>
                <th>Attempt Status</th>
                <th>Start time</th>
                <th>Submit time</th>
                <th>Marks</th>
                <th>Preview</th>
            </tr>
        </thead>
        <tbody>
            {% for student in students %}
                <tr>
                    <td>{{ student.name.username }}</td>
                    <td>{{ student|student_test_attempt_status:test }}</td>
                    <td>{{ student|student_test_start_time:test }}</td>
                    <td>{{ student|student_test_end_time:test }}</td>
                    <td>{{ student|student_test_attempt_marks:test }}</td>
                    <td><a href="{% url 'firstapp:preview-test' id=test.id  stud_id=student.id %}" class="tag-button">Preview</a></td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
</div>



<style>
    .test-details {
        background: var(--glass-bg);
        /* backdrop-filter: blur(10px); */
        border: 1px solid var(--glass-border);
        border-radius: var(--radius);
        padding: 30px;
        margin-top: 20px;
    }
        .info-card {
        background: var(--card-bg);
        border-radius: var(--radius);
        padding: 20px;
        margin-bottom: 30px;
    }

    .info-card h2 {
        color: var(--primary-color);
        margin-bottom: 15px;
    }

    .info-card p {
        margin-bottom: 10px;
    }
    .table-responsive {
        overflow-x: auto;
    }

    .bordered-table {
        width: 100%;
        border-collapse: collapse;
    }

    .bordered-table th,
    .bordered-table td {
        border: 1px solid var(--glass-border);
        text-align: center;
        padding: 8px;
    }

    .bordered-table th {
        background-color: var(--glass-bg);
    }

    .status-btn {
        background-color: var(--accent-color);
        color: #fff;
        padding: 5px 10px;
        border-radius: var(--radius);
        font-size: 0.9em;
    }

    .action-buttons {
        margin-top: 30px;
    }
    .bordered-table {
        width: 100%;
        border-collapse: collapse;
    }

    .bordered-table th,
    .bordered-table td {
        border: 1px solid var(--glass-border);
        padding: 8px;
    }

    .bordered-table th {
        background-color: var(--glass-bg);
    }
    .tag-button {
        background-color: var(--secondary-color);
        color: #fff;
        padding: 5px 10px;
        border-radius: var(--radius);
        text-decoration: none;
        font-size: 0.9em;
        transition: background-color var(--transition-speed);
    }

    .tag-button:hover {
        background-color: var(--accent-color);
    }


</style>

{% endblock %}